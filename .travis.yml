language: java
node_js:
- '0.10'
before_script:
- cd www
- npm install -g bower
- npm install
- bower install -f
- cd ..
script: gradle build
notifications:
  email:
    recipients:
    - ajay.samgir@krishagni.com
    on_success: always
    on_failure: always

before_deploy:
- export RELEASE_FILE=$(ls build/libs/*.war)
- echo "Deploying $RELEASE_FILE to GitHub"
deploy:
  provider: releases
  api_key:
    secure: UeM8dx0xtsUmq3ckk5AtFHwB0/uVC23yORukyfWi3Q3l4mV4//9I9Ve0N9s/Xq7+r76H7l7kS8riK9K2WmnMBGVOvWOXFO+k9ikMM+yfZ8z1gkijHqfffdOlF97mgi7c9u7iA/OwPCYJGWWAZh5rGVqpbIIFDz7/yolfRL65vIxs31CHVqIDKb2qfciDkswVctdd+oYfxgMVP7EGWs0KX7DmSixAA6up46aZFv1Px1GQVkdea9kLOHCjw8Y9RknsQIUSIjrVqjtm+d/1PledsovsSKWs2qMqYDh4EcRs++wzxK/ZLSM+ByWb/bWQbKAHvyXTFsEh2NSLwvE5309r0sBN69DvHIOqBeC+s9bKOcO5H59gwU2iG6yv5KgUcTjAQAAlQh07Ylan6FpSoWdBA4jZSyj1qBMJhflPejQGTp8arv+NuUwVVVVIM5QOq9Qb/3DS0avoEvXIvCiQ4cw7RQh2MbgKIUMGyefb0WFPGGn8NLOu4E5biQaZiJ75CJZAo35SFauaHcmV+aVvOY1c0FcBo2v0xoWo5CoxjRDizNSKfiW0BHvwrPeaUTgHk5woBa3aa9PlVreKMOUDWtAaOtI4AUneez1YpEOIzQn42MpuxysUgsjzzRGlVxZbAuuWGX0FrWhwPMqR3w/799xUKwOV2e7axEBWn2GzUY4SCPg=
  file:
  - ${RELEASE_FILE}
  skip_cleanup: true
  on:
    repo: asamgir/openspecimen
    tags: true
    all_branches: true
  
